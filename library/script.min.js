let myLib=localStorage.getItem("myLib")?JSON.parse(localStorage.getItem("myLib")):[];const bookDisplay=document.getElementById("book-display"),title=document.getElementById("title"),author=document.getElementById("author"),pages=document.getElementById("pages"),read=document.getElementById("read"),addBtn=document.getElementById("button-add");function populateStorage(){localStorage.setItem("myLib",JSON.stringify(myLib))}function Book(e,t,o,a){this.author=t,this.title=e,this.pages=o,this.read=a,this.info=()=>{console.log(this.title,this.author,this.pages,this.read)}}function addBookToLib(){var e=new Book(title.value,author.value,pages.value,read.checked);myLib.push(e),renderBooks(),populateStorage()}function delBookFromLib(e){e=Number(e.id.slice(4));myLib.splice(e,1),renderBooks(),populateStorage()}function toggleRead(e){e=Number(e.id.slice(4));console.log(myLib[e].read),myLib[e].read=!myLib[e].read,populateStorage()}function clear(){for(;bookDisplay.firstChild;)bookDisplay.removeChild(bookDisplay.firstChild)}function renderBooks(){clear(),myLib.forEach((e,t)=>{makeBookDiv(e,t)})}function makeBookDiv(e,t){let o=document.createElement("div"),a=document.createElement("div"),n=document.createElement("div"),l=document.createElement("div"),i=document.createElement("button"),d=document.createElement("button");return a.textContent=e.title,n.textContent="By: "+e.author,l.textContent=e.pages+" Pages",i.textContent=e.read?"Read":"Not Read",d.textContent="Delete",o.appendChild(a).className="book-title",o.appendChild(n).className="book-author",o.appendChild(l).className="book-pages",i.className="Read"===i.textContent?"book-read":"book-read btn-red",o.appendChild(i),o.appendChild(d).className="book-delete btn-red",o.id="book"+t,i.addEventListener("click",function(e){toggleRead(this.parentNode),this.textContent="Read"===this.textContent?"Not Read":"Read",this.className="Read"===this.textContent?"book-read":"book-read btn-red"}),d.addEventListener("click",function(e){delBookFromLib(this.parentNode)}),bookDisplay.appendChild(o).className="a-book",o}addBtn.addEventListener("click",e=>{if(0!==title.value.length)if(0!==author.value.length){let t=pages.value;if(0!==t.length)if(+t==+t)if(Number(t)<1)alert("Pages cannot be less than zero!");else{let e=0;for(;e<t.length&&"0"===t[e];++e);pages.value=t.slice(e),addBookToLib()}else alert("Invalid pages!");else alert("Invalid pages!")}else alert("Invalid author!");else alert("Invalid title !")}),renderBooks();