const calcNumbers=document.querySelectorAll("[data-number]"),calcOps=document.querySelectorAll("[data-operator]"),screen=document.querySelector("[data-screen]"),equals=document.querySelector("[data-equals]"),clear=document.querySelector("[data-clear]"),point=document.querySelector("[data-point]"),delBtn=document.querySelector("[data-delete]");let firstOp="",secondOp="",curOp=null,shouldResetScr=!1,enteredNum=!1;const add=(e,t)=>e+t,subtract=(e,t)=>e-t,multiply=(e,t)=>e*t,divide=(e,t)=>e/t,operate=(e,t,n)=>{switch(e=Number(e),t=Number(t),n){case"+":return add(e,t);case"-":return subtract(e,t);case"*":return multiply(e,t);case"/":return 0!==t?divide(e,t):NaN;default:return NaN}};function reset(){firstOp="",secondOp="",curOp=null,screen.textContent="",shouldResetScr=!0}function pushNumber(e){if(1===screen.textContent.length&&"0"===screen.textContent[0]){if("0"===e)return;screen.textContent=""}curOp&&shouldResetScr&&(screen.textContent=""),screen.textContent+=e,shouldResetScr=!1,enteredNum=!0}function pushPoint(e){for(let e=0;e<screen.textContent.length;++e)if("."===screen.textContent[e])return;curOp&&shouldResetScr&&(screen.textContent=""),screen.textContent+=e,shouldResetScr=!1}function updateOp(e){0!==screen.textContent.length&&(curOp&&enteredNum&&lesGo(),curOp=e,firstOp=screen.textContent,shouldResetScr=!0,enteredNum=!1)}function lesGo(){curOp&&(secondOp=screen.textContent,screen.textContent=operate(firstOp,secondOp,curOp),firstOp=screen.textContent,curOp=null)}function del(){0<screen.textContent.length&&(screen.textContent=screen.textContent.slice(0,screen.textContent.length-1))}calcNumbers.forEach(t=>{t.addEventListener("click",e=>{pushNumber(t.textContent)})}),calcOps.forEach(t=>{t.addEventListener("click",e=>{updateOp(t.textContent)})}),equals.addEventListener("click",e=>{lesGo()}),clear.addEventListener("click",e=>{reset()}),point.addEventListener("click",e=>{pushPoint(point.textContent)}),delBtn.addEventListener("click",e=>{del()}),document.addEventListener("keydown",r=>{for(let e=48,t=96,n=0;e<58;++e,++t,++n)(r.keyCode===e||r.keyCode===t)&&pushNumber(String(n));switch(r.keyCode){case 8:del();break;case 13:lesGo();break;case 107:updateOp("+");break;case 109:updateOp("-");break;case 106:updateOp("*");break;case 111:updateOp("/");break;case 190:pushPoint(".")}});